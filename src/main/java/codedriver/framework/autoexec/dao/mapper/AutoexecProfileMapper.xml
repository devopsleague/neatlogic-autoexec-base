<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="codedriver.framework.autoexec.dao.mapper.AutoexecProfileMapper">

    <select id="searchAutoexecProfileCount" parameterType="codedriver.framework.autoexec.dto.profile.AutoexecProfileVo"
            resultType="int">
        SELECT
        COUNT( 1 )
        FROM
        `autoexec_profile` a
        LEFT JOIN autoexec_profile_tool apt ON apt.profile_id = a.id
        LEFT JOIN autoexec_profile_script aps ON aps.profile_id = a.id
        <where>
            <if test="keyword != null and keyword != ''">
                and a.`name` LIKE CONCAT('%', #{keyword}, '%')
            </if>
            <if test="scriptId != null">
                and `script_id` = #{scriptId}
            </if>
            <if test="toolId != null">
                and apt`tool_id` = #{toolId}
            </if>
        </where>
    </select>

    <select id="searchAutoexecCatalog"
            resultType="codedriver.framework.autoexec.dto.profile.AutoexecProfileVo">

    </select>

</mapper>

